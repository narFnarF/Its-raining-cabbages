<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>grinding events</name>
    <events>
        <include>gameplay stuff</include>
        <include>global events</include>
        <event-block sid="2268960123690109">
            <conditions>
                <condition id="-2" name="On start of layout" sid="6438073248969551" type="System" />
            </conditions>
            <actions>
                <action id="-16" name="Set opacity" sid="9464839056543687" type="blackFlash">
                    <param id="0" name="Opacity">0</param>
                </action>
                <action id="0" name="Call function" sid="8998261585930994" type="Function">
                    <param id="0" name="Name">&quot;grinding. select enemy type&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="0" name="Call function" sid="6774781569051233" type="Function">
                    <param id="0" name="Name">&quot;grinding. update battle text&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
                <action id="0" name="Call function" sid="439648095813667" type="Function">
                    <param id="0" name="Name">&quot;grinding. update ETA bar&quot;</param>
                    <param id="1" name="Parameter {n}">&quot;just bar&quot;</param>
                </action>
                <action id="0" name="Call function" sid="2139183865054088" type="Function">
                    <param id="0" name="Name">&quot;grinding. level up maybe&quot;</param>
                    <param id="1" name="Parameter {n}"></param>
                </action>
            </actions>
            <sub-events>
                <event-block any="1" sid="8680086694843432">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="1352988457667533" type="pkStats">
                            <param id="0" name="Instance variable">state</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;walking&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="894200508979487" type="pkStats">
                            <param id="0" name="Instance variable">state</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;transition to battle&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="5683691957264364" type="camera">
                            <param id="0" name="Instance variable">screen</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2489204122538828">
                    <conditions>
                        <condition id="-22" name="Else" sid="6900619028471259" type="System" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="6328535724557315" type="camera">
                            <param id="0" name="Instance variable">screen</param>
                            <param id="1" name="Value">2</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="167931385610393">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="7253089522388256" type="screen">
                            <param id="0" name="Instance variable">number</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">camera.screen</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-4" name="Set position to another object" sid="3038056388897467" type="camera">
                            <param id="0" name="Object">screen</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                    </actions>
                </event-block>
                <comment>pour donner l&apos;illusion que le temps s&apos;est écoulé, on ajuste le timer à une position aléatoire</comment>
                <comment>le &quot;wait 0.000001&quot; est nécessaire pour que ça se fasse *après* que le combat soit initialisé.</comment>
                <event-block sid="2619501622992119">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="6312566158166694" type="pkStats">
                            <param id="0" name="Instance variable">state</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;battle&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-16" name="Wait" sid="7414669505965229" type="System">
                            <param id="0" name="Seconds">0.0000000000001</param>
                        </action>
                        <action id="-10" name="Set value" sid="6504618222698972" type="pkStats">
                            <param id="0" name="Instance variable">battleTimer</param>
                            <param id="1" name="Value">random(0, pkStats.battleTimer)</param>
                        </action>
                        <action disabled="1" id="14" name="Log" sid="5427270745784395" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;!!!!!!!!!!!!!!! là&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="3876428726128799">
                    <conditions />
                    <actions>
                        <action id="-16" name="Wait" sid="5838984929356269" type="System">
                            <param id="0" name="Seconds">5</param>
                        </action>
                        <action id="0" name="Call function" sid="7588951776743352" type="Function">
                            <param id="0" name="Name">&quot;grinding. update ETA bar&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;just ETA&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <comment>Ce bloc sert à créer le pkStat s&apos;il est manquant ou effacer les duplicatas si y&apos;en a.</comment>
                <event-block sid="8587748613533254">
                    <conditions />
                    <actions>
                        <action id="14" name="Log" sid="6581951958320141" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;Checking for pkStats&quot;</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>Missing pkStats. Creating one.</comment>
                        <event-block sid="2741042662262795">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="223090996855967" type="System">
                                    <param id="0" name="First value">pkStats.PickedCount</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="14" name="Log" sid="1198444380188125" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;pkStats is missing. Creating one.&quot;</param>
                                </action>
                                <action id="-3" name="Create object" sid="9773660700279707" type="System">
                                    <param id="0" name="Object to create">pkStats</param>
                                    <param id="1" name="Layer">&quot;gameplay&quot;</param>
                                    <param id="2" name="X">-153</param>
                                    <param id="3" name="Y"> 708</param>
                                </action>
                                <action id="-10" name="Set value" sid="4194895596144816" type="pkStats">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Value">&quot;walking&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="5167813490272085" type="pkStats">
                                    <param id="0" name="Instance variable">timerWalking</param>
                                    <param id="1" name="Value">3</param>
                                </action>
                                <action id="-10" name="Set value" sid="7593179424016981" type="pkStats">
                                    <param id="0" name="Instance variable">level</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="8128937968920629" type="pkStats">
                                    <param id="0" name="Instance variable">levelEnemy</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="9514156648890073" type="pkStats">
                                    <param id="0" name="Instance variable">currentNode</param>
                                    <param id="1" name="Value">0</param>
                                </action>
                                <action id="-10" name="Set value" sid="6135484912702014" type="pkStats">
                                    <param id="0" name="Instance variable">killsToDo</param>
                                    <param id="1" name="Value">10</param>
                                </action>
                                <action id="-10" name="Set value" sid="4760332791578329" type="pkStats">
                                    <param id="0" name="Instance variable">xpRequired</param>
                                    <param id="1" name="Value">10</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="7662436725147987">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="3344007657184766" type="System">
                                    <param id="0" name="First value">pkStats.PickedCount</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="14" name="Log" sid="3207925375021681" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;Everything is fine with the pkStats&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>Multiple pkStats detected. Deleting the low level ones.</comment>
                        <comment>This is to fix an old bug, and should be removed. Kept as a safeguard.</comment>
                        <event-block sid="9821435713894546">
                            <conditions>
                                <condition id="-19" name="Pick all" sid="696694862237016" type="System">
                                    <param id="0" name="Object">pkStats</param>
                                </condition>
                                <condition id="-12" name="Repeat" sid="3325928241136909" type="System">
                                    <param id="0" name="Count">15</param>
                                </condition>
                                <condition id="-8" name="Compare two values" sid="1979444018305872" type="System">
                                    <param id="0" name="First value">pkStats.PickedCount</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Second value">2</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="14" name="Log" sid="2502649914881056" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;Detected &quot; &amp; pkStats.PickedCount &amp; &quot; instances of pkStats. Deleting one.&quot;</param>
                                </action>
                                <action id="0" name="Call function" sid="9376697229871026" type="Function">
                                    <param id="0" name="Name">&quot;notification&quot;</param>
                                    <param id="1" name="Parameter {n}">&quot;Detected &quot; &amp; pkStats.PickedCount &amp; &quot; instances of pkStats. Deleting one.&quot;</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="9610574334890004">
                                    <conditions>
                                        <condition id="-20" name="Pick highest/lowest" sid="5074336306563724" type="pkStats">
                                            <param id="0" name="Which">0</param>
                                            <param id="1" name="Instance variable">level</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-9" name="Destroy" sid="8260597429043293" type="pkStats" />
                                        <action id="14" name="Log" sid="4314639166089908" type="Browser">
                                            <param id="0" name="Type">0</param>
                                            <param id="1" name="Message">&quot;Deleting &quot; &amp; pkStats.UID</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-block>
        <event-group description="" sid="1185016671241999" title="fill all the data" />
        <event-group description="" sid="5344607217737034" title="walking">
            <sub-events>
                <event-block sid="2194874772713075">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="5749455098442542" type="grindingGuy">
                            <param id="0" name="Object">blocker</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="1514981155042502" type="pkStats">
                            <param id="0" name="Instance variable">state</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;walking&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action behavior="Bullet" id="3" name="Set angle of motion" sid="1790485810665595" type="grindingGuy">
                            <param id="0" name="Angle">grindingGuy.Bullet.AngleOfMotion -90</param>
                        </action>
                    </actions>
                    <sub-events>
                        <comment>start battle when timerWalk reaches 0</comment>
                        <event-block sid="5131255705021431">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="9177637264704633" type="pkStats">
                                    <param id="0" name="Instance variable">timerWalking</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="4522280168888813" type="pkStats">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Value">&quot;transition to battle&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="1985286140291426">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="6905847662633274" type="System">
                            <param id="0" name="First value">abs( grindingGuy.Bullet.AngleOfMotion )</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Second value">90</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="7" name="Set mirrored" sid="6608301581083482" type="grindingGuy">
                            <param id="0" name="State">1</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="5737857073752228">
                    <conditions>
                        <condition id="-22" name="Else" sid="4858964661610168" type="System" />
                    </conditions>
                    <actions>
                        <action id="7" name="Set mirrored" sid="9895201434193203" type="grindingGuy">
                            <param id="0" name="State">0</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="924092768155812">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="6455110049081021" type="System">
                            <param id="0" name="Interval (seconds)">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Subtract from" sid="9882328234660225" type="pkStats">
                            <param id="0" name="Instance variable">timerWalking</param>
                            <param id="1" name="Value">1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="8596006644764351" title="UI (grinding)">
            <sub-events>
                <comment>HP bar</comment>
                <event-block sid="7601235825878619">
                    <conditions />
                    <actions>
                        <action id="-10" name="Set value" sid="5272534160174837" type="pkBar">
                            <param id="0" name="Instance variable">value</param>
                            <param id="1" name="Value">clamp(pkBar.value, 0, pkBar.valueMax)</param>
                        </action>
                        <action id="-4" name="Set position to another object" sid="9666161332579859" type="pkBar">
                            <param id="0" name="Object">pkBarBg</param>
                            <param id="1" name="Image point (optional)">0</param>
                        </action>
                        <action id="-7" name="Set size" sid="9117534063255108" type="pkBar">
                            <param id="0" name="Width">pkBar.value/pkBar.valueMax * pkBarBg.Width</param>
                            <param id="1" name="Height">pkBarBg.Height</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="4809279419348728">
                    <conditions>
                        <condition id="0" name="On function" sid="3753054874434687" type="Function">
                            <param id="0" name="Name">&quot;grinding. update battle text&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="5026249606696465" type="pkLevel">
                            <param id="0" name="Text">&quot;Lvl: &quot; &amp; pkStats.level</param>
                        </action>
                        <action id="0" name="Set text" sid="392107663605535" type="pkName">
                            <param id="0" name="Text">pokemon.AnimationName</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="9913405089700515">
                    <conditions>
                        <condition id="0" name="On function" sid="3358041876030159" type="Function">
                            <param id="0" name="Name">&quot;grinding. update ETA bar&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="whatToChange" sid="5065684459382963" static="0" type="text"></variable>
                        <event-block sid="7010705317286951">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="7313853762456242" type="System">
                                    <param id="0" name="First value">Function.ParamCount</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Second value">1</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="6904141183305042" type="System">
                                    <param id="0" name="Variable">whatToChange</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block any="1" sid="9265801566095041">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="5207554186051186" type="System">
                                            <param id="0" name="Variable">whatToChange</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;just bar&quot;</param>
                                        </condition>
                                        <condition id="-14" name="Compare variable" sid="1299590145682908" type="System">
                                            <param id="0" name="Variable">whatToChange</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;both&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="4550580324549401">
                                            <conditions>
                                                <condition id="-7" name="Compare instance variable" sid="7815287729944618" type="pkBar">
                                                    <param id="0" name="Instance variable">name</param>
                                                    <param id="1" name="Comparison">0</param>
                                                    <param id="2" name="Value">&quot;sector progress&quot;</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-10" name="Set value" sid="6579826572370681" type="pkBar">
                                                    <param id="0" name="Instance variable">value</param>
                                                    <param id="1" name="Value">pkStats.killsDone</param>
                                                </action>
                                                <action id="-10" name="Set value" sid="6130984911365962" type="pkBar">
                                                    <param id="0" name="Instance variable">valueMax</param>
                                                    <param id="1" name="Value">pkStats.killsToDo</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block any="1" sid="3002658881096873">
                                    <conditions>
                                        <condition id="-14" name="Compare variable" sid="6283919937503581" type="System">
                                            <param id="0" name="Variable">whatToChange</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;just ETA&quot;</param>
                                        </condition>
                                        <condition id="-14" name="Compare variable" sid="1519426116880661" type="System">
                                            <param id="0" name="Variable">whatToChange</param>
                                            <param id="1" name="Comparison">0</param>
                                            <param id="2" name="Value">&quot;both&quot;</param>
                                        </condition>
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <variable constant="0" name="timeLeft" sid="1852091755798575" static="0" type="number">0</variable>
                                        <event-block sid="2106436471794681">
                                            <conditions />
                                            <actions>
                                                <action id="-9" name="Set value" sid="4654169943700729" type="System">
                                                    <param id="0" name="Variable">timeLeft</param>
                                                    <param id="1" name="Value">pkStats.killsToDo-pkStats.killsDone</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="9162892563811972">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="9373160462216518" type="System">
                                                    <param id="0" name="First value">timeLeft</param>
                                                    <param id="1" name="Comparison">4</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Set text" sid="4505739026631691" type="pkBarSectorTimeTxt">
                                                    <param id="0" name="Text">&quot;ETA: &quot; &amp; round(timeLeft) &amp; &quot; sec&quot;</param>
                                                </action>
                                            </actions>
                                            <sub-events>
                                                <event-block sid="636863485535924">
                                                    <conditions>
                                                        <condition id="-8" name="Compare two values" sid="2435456708012525" type="System">
                                                            <param id="0" name="First value">timeLeft</param>
                                                            <param id="1" name="Comparison">4</param>
                                                            <param id="2" name="Second value">3600</param>
                                                        </condition>
                                                    </conditions>
                                                    <actions>
                                                        <action id="0" name="Set text" sid="366699141549881" type="pkBarSectorTimeTxt">
                                                            <param id="0" name="Text">&quot;ETA: about &quot; &amp; ceil(timeLeft/3600) &amp; &quot; hours&quot;</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                                <event-block sid="3735193630075182">
                                                    <conditions>
                                                        <condition id="-22" name="Else" sid="7298076871482915" type="System" />
                                                    </conditions>
                                                    <actions>
                                                        <action id="0" name="Set text" sid="51708140115236" type="pkBarSectorTimeTxt">
                                                            <param id="0" name="Text">&quot;ETA: about &quot; &amp; ceil(timeLeft/60) &amp; &quot; minutes&quot;</param>
                                                        </action>
                                                    </actions>
                                                </event-block>
                                            </sub-events>
                                        </event-block>
                                        <event-block sid="6924609764527775">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="2584935362182572" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="0" name="Set text" sid="1749396153336039" type="pkBarSectorTimeTxt">
                                                    <param id="0" name="Text">&quot;Completed!&quot;</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="8540978209649851" title="time has passed (grinding)">
            <sub-events>
                <event-block sid="2943832592794264">
                    <conditions>
                        <condition id="0" name="On function" sid="5260027230495328" type="Function">
                            <param id="0" name="Name">&quot;time has passed&quot;</param>
                        </condition>
                    </conditions>
                    <actions />
                    <sub-events>
                        <variable constant="0" name="deltatime" sid="5164264819706096" static="0" type="number">0</variable>
                        <event-block sid="4996942532174441">
                            <conditions />
                            <actions>
                                <action id="-9" name="Set value" sid="3011862324513504" type="System">
                                    <param id="0" name="Variable">deltatime</param>
                                    <param id="1" name="Value">Function.Param(0)</param>
                                </action>
                                <action disabled="1" id="-11" name="Add to" sid="6470691297771034" type="pkStats">
                                    <param id="0" name="Instance variable">killsDone</param>
                                    <param id="1" name="Value">deltatime</param>
                                </action>
                                <action disabled="1" id="-11" name="Add to" sid="9546799590926938" type="pkStats">
                                    <param id="0" name="Instance variable">xp</param>
                                    <param id="1" name="Value">deltatime</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="3654034178288051">
                            <conditions>
                                <condition id="-8" name="Compare two values" sid="6468147041648994" type="System">
                                    <param id="0" name="First value">deltatime</param>
                                    <param id="1" name="Comparison">5</param>
                                    <param id="2" name="Second value">4</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="14" name="Log" sid="4987090062378407" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;time has passed: &quot; &amp; Function.Param(0)</param>
                                </action>
                                <action id="-10" name="Set value" sid="8691671301370944" type="pkStats">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Value">choose(&quot;walking&quot;, &quot;battle&quot;)</param>
                                </action>
                                <action id="-26" name="Restart layout" sid="7091479156683841" type="System" />
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="7796730826831464" title="battle">
            <sub-events>
                <comment>transition to battle</comment>
                <comment>all this is just for animation stuff</comment>
                <event-block sid="9070795463993572">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="9005618646543891" type="pkStats">
                            <param id="0" name="Instance variable">state</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;transition to battle&quot;</param>
                        </condition>
                        <condition id="-1" name="Every tick" sid="8462240174650049" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Fade" id="1" name="Start fade" sid="7058727417281403" type="blackFlash" />
                        <action behavior="Bullet" id="5" name="Set enabled" sid="7562713413484247" type="grindingGuy">
                            <param id="0" name="State">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="7800459703917163">
                            <conditions>
                                <condition id="-4" name="Trigger once while true" sid="7687648877882276" type="System" />
                            </conditions>
                            <actions>
                                <action behavior="Fade" id="0" name="Restart fade" sid="1793371922981582" type="blackFlash" />
                                <action id="14" name="Log" sid="8924857721856099" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;transition to battle&quot;</param>
                                </action>
                                <action id="0" name="Call function" sid="7175598318022916" type="Function">
                                    <param id="0" name="Name">&quot;grinding. select enemy type&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="0" name="Call function" sid="45912346106986" type="Function">
                                    <param id="0" name="Name">&quot;grinding. update battle text&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="-16" name="Wait" sid="650776969148032" type="System">
                                    <param id="0" name="Seconds">1</param>
                                </action>
                                <action disabled="1" id="14" name="Log" sid="1369789268447483" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;transition to battle after waiting 1 sec&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="7018238532511251" type="camera">
                                    <param id="0" name="Instance variable">screen</param>
                                    <param id="1" name="Value">2</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="3586570686702613">
                                    <conditions>
                                        <condition id="-8" name="Is boolean instance variable set" sid="8517460025955088" type="pokemon">
                                            <param id="0" name="Instance variable">yours</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="3" name="Start" sid="4277177883362241" type="pokemon">
                                            <param id="0" name="From">1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="197073529053121">
                                    <conditions>
                                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="8683585244067638" type="pokemon">
                                            <param id="0" name="Instance variable">yours</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-8" name="Set angle" sid="8427493801922752" type="pokemon">
                                            <param id="0" name="Angle">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="4409329217542162">
                            <conditions>
                                <condition id="1" name="Is overlapping another object" sid="5750878274425059" type="camera">
                                    <param id="0" name="Object">screen</param>
                                </condition>
                                <condition id="-7" name="Compare instance variable" sid="2630258463877634" type="screen">
                                    <param id="0" name="Instance variable">number</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">2</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="434370913535221" type="pkStats">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Value">&quot;battle&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="5426547973007334">
                    <conditions>
                        <condition id="0" name="On function" sid="267823555026709" type="Function">
                            <param id="0" name="Name">&quot;grinding. select enemy type&quot;</param>
                        </condition>
                        <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="8284695300321048" type="pokemon">
                            <param id="0" name="Instance variable">yours</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="4" name="Set animation" sid="4330356470565039" type="pokemon">
                            <param id="0" name="Animation">choose(&quot;Grand&quot;, &quot;Pikachat&quot;, &quot;Rando&quot;, &quot;Verachou&quot;)</param>
                            <param id="1" name="From">1</param>
                        </action>
                        <action id="2" name="Stop" sid="3438510663074907" type="pokemon" />
                    </actions>
                </event-block>
                <comment>battle is running</comment>
                <event-block sid="2246724656841379">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="5341186549897141" type="pkStats">
                            <param id="0" name="Instance variable">state</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;battle&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="5525961259304256" type="pkBar">
                            <param id="0" name="Instance variable">name</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;ennemi&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-12" name="Subtract from" sid="1624812791090238" type="pkStats">
                            <param id="0" name="Instance variable">battleTimer</param>
                            <param id="1" name="Value">dt</param>
                        </action>
                        <action behavior="Bullet" id="5" name="Set enabled" sid="862854085556791" type="grindingGuy">
                            <param id="0" name="State">0</param>
                        </action>
                        <action id="-10" name="Set value" sid="9819087112215421" type="pkBar">
                            <param id="0" name="Instance variable">value</param>
                            <param id="1" name="Value">pkStats.battleTimer</param>
                        </action>
                    </actions>
                    <sub-events>
                        <variable constant="0" name="battleDuration" sid="3526595074317936" static="1" type="number">0</variable>
                        <variable constant="0" name="xpReward" sid="6780121912676001" static="1" type="number">0</variable>
                        <comment>start (initialize) the battle (trigger once)</comment>
                        <event-block sid="3784146116079623">
                            <conditions>
                                <condition id="-4" name="Trigger once while true" sid="6073426933070125" type="System" />
                            </conditions>
                            <actions>
                                <action id="14" name="Log" sid="7229903608180595" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;battle&quot;</param>
                                </action>
                                <action id="-9" name="Set value" sid="2329160849393022" type="System">
                                    <param id="0" name="Variable">battleDuration</param>
                                    <param id="1" name="Value">25*1.5^(-1.9*(99999-1))</param>
                                </action>
                                <action id="-10" name="Set value" sid="7554656810056318" type="pkStats">
                                    <param id="0" name="Instance variable">battleTimer</param>
                                    <param id="1" name="Value">battleDuration</param>
                                </action>
                                <action id="-10" name="Set value" sid="4988020396270822" type="pkBar">
                                    <param id="0" name="Instance variable">valueMax</param>
                                    <param id="1" name="Value">battleDuration</param>
                                </action>
                                <action id="-10" name="Set value" sid="3207098583845686" type="pkBar">
                                    <param id="0" name="Instance variable">value</param>
                                    <param id="1" name="Value">battleDuration</param>
                                </action>
                            </actions>
                        </event-block>
                        <comment>battle is over (trigger once)</comment>
                        <event-block sid="3700071326934414">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="2401655720918012" type="pkStats">
                                    <param id="0" name="Instance variable">battleTimer</param>
                                    <param id="1" name="Comparison">3</param>
                                    <param id="2" name="Value">0</param>
                                </condition>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="5173693693729994" type="pokemon">
                                    <param id="0" name="Instance variable">yours</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-9" name="Set value" sid="704446368282492" type="System">
                                    <param id="0" name="Variable">xpReward</param>
                                    <param id="1" name="Value">battleDuration*0.25</param>
                                </action>
                                <action id="-10" name="Set value" sid="3688188041949951" type="pkStats">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Value">&quot;transition to walking&quot;</param>
                                </action>
                                <action id="-11" name="Add to" sid="2403101660127338" type="pkStats">
                                    <param id="0" name="Instance variable">xp</param>
                                    <param id="1" name="Value">xpReward</param>
                                </action>
                                <action id="0" name="Call function" sid="2836586223860108" type="Function">
                                    <param id="0" name="Name">&quot;grinding. level up maybe&quot;</param>
                                    <param id="1" name="Parameter {n}"></param>
                                </action>
                                <action id="0" name="Call function" sid="8072302873541318" type="Function">
                                    <param id="0" name="Name">&quot;grinding. update ETA bar&quot;</param>
                                    <param id="1" name="Parameter {n}">&quot;both&quot;</param>
                                </action>
                                <action disabled="1" id="0" name="Call function" sid="7767471929881161" type="Function">
                                    <param id="0" name="Name">&quot;count&quot;</param>
                                    <param id="1" name="Parameter {n}">&quot;monster beaten&quot;</param>
                                </action>
                                <action id="0" name="Call function" sid="9160280279333226" type="Function">
                                    <param id="0" name="Name">&quot;notification&quot;</param>
                                    <param id="1" name="Parameter {n}">&quot;You won against &quot; &amp; pokemon.AnimationName &amp; &quot; and receive &quot; &amp; xpReward &amp; &quot; XP.&quot;</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <comment>transition to walking</comment>
                <event-block sid="8974346567355477">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="8090997678781689" type="pkStats">
                            <param id="0" name="Instance variable">state</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;transition to walking&quot;</param>
                        </condition>
                        <condition id="-7" name="Compare instance variable" sid="1410426930775511" type="pkBar">
                            <param id="0" name="Instance variable">name</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">&quot;ennemi&quot;</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="928649217359917" type="pkBar">
                            <param id="0" name="Instance variable">value</param>
                            <param id="1" name="Value">0</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="6546418375843056">
                            <conditions>
                                <condition id="-8" name="Is boolean instance variable set" sid="2447976345549565" type="pokemon">
                                    <param id="0" name="Instance variable">yours</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="2" name="Stop" sid="6850922002689053" type="pokemon" />
                                <action id="5" name="Set frame" sid="8090908858720645" type="pokemon">
                                    <param id="0" name="Frame number">0</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="3911310713367465">
                            <conditions>
                                <condition id="-8" inverted="1" name="Is boolean instance variable set" sid="5186164655712068" type="pokemon">
                                    <param id="0" name="Instance variable">yours</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-8" name="Set angle" sid="3495230551996674" type="pokemon">
                                    <param id="0" name="Angle">lerp(pokemon.Angle, 90, 0.2)</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="1855560992995136">
                            <conditions>
                                <condition id="-4" name="Trigger once while true" sid="2310466752775224" type="System" />
                            </conditions>
                            <actions>
                                <action id="14" name="Log" sid="2808810822717245" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;transition to walking&quot;</param>
                                </action>
                                <action behavior="Bullet" id="5" name="Set enabled" sid="718362095413998" type="grindingGuy">
                                    <param id="0" name="State">0</param>
                                </action>
                                <action id="-16" name="Wait" sid="7050946546171289" type="System">
                                    <param id="0" name="Seconds">1.0</param>
                                </action>
                                <action id="14" name="Log" sid="3219238026832813" type="Browser">
                                    <param id="0" name="Type">0</param>
                                    <param id="1" name="Message">&quot;walking&quot;</param>
                                </action>
                                <action behavior="Bullet" id="5" name="Set enabled" sid="4570939203694325" type="grindingGuy">
                                    <param id="0" name="State">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="5539511218277338" type="camera">
                                    <param id="0" name="Instance variable">screen</param>
                                    <param id="1" name="Value">1</param>
                                </action>
                                <action id="-10" name="Set value" sid="9744420168441121" type="pkStats">
                                    <param id="0" name="Instance variable">state</param>
                                    <param id="1" name="Value">&quot;walking&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="9614125700155226" type="pkStats">
                                    <param id="0" name="Instance variable">timerWalking</param>
                                    <param id="1" name="Value">random(1, 10)</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="4565471605711386" title="debug (grinding)">
            <sub-events>
                <event-block sid="9981365439054539">
                    <conditions>
                        <condition id="0" name="On key pressed" sid="1872391825412027" type="Keyboard">
                            <param id="0" name="Key">32 (Space)</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action disabled="1" id="-15" name="Set visible" sid="1079359166544515" type="pkLevelUpIcon">
                            <param id="0" name="Visibility">1</param>
                        </action>
                        <action id="-10" name="Set value" sid="2501406870748443" type="pkStats">
                            <param id="0" name="Instance variable">xp</param>
                            <param id="1" name="Value">pkStats.xpRequired</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="2397086887001473">
                    <conditions>
                        <condition id="-6" name="Every X seconds" sid="3512898148027457" type="System">
                            <param id="0" name="Interval (seconds)">1</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="89701391669235" type="pkSectorName">
                            <param id="0" name="Text">&quot;XP: &quot; &amp; pkStats.xp &amp; &quot;/&quot; &amp; pkStats.xpRequired</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <comment>This function levels up the pkmn if xp is greater than required.</comment>
        <comment>I don&apos;t know why it has a 0.5 sec delay</comment>
        <event-block sid="2807159354460408">
            <conditions>
                <condition id="0" name="On function" sid="3123831184608844" type="Function">
                    <param id="0" name="Name">&quot;grinding. level up maybe&quot;</param>
                </condition>
            </conditions>
            <actions>
                <action id="-16" name="Wait" sid="3064302175091518" type="System">
                    <param id="0" name="Seconds">0.5</param>
                </action>
                <action disabled="1" id="14" name="Log" sid="2517896124525695" type="Browser">
                    <param id="0" name="Type">0</param>
                    <param id="1" name="Message">&quot;Checking for level up&quot;</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="8137104335658609">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="956258587248357" type="System">
                            <param id="0" name="First value">pkStats.xp</param>
                            <param id="1" name="Comparison">5</param>
                            <param id="2" name="Second value">pkStats.xpRequired</param>
                        </condition>
                        <condition id="-8" name="Is boolean instance variable set" sid="4536629962425015" type="pokemon">
                            <param id="0" name="Instance variable">yours</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action disabled="1" id="14" name="Log" sid="6161492955484362" type="Browser">
                            <param id="0" name="Type">0</param>
                            <param id="1" name="Message">&quot;Checking for level up: Confirmed!&quot;</param>
                        </action>
                        <action disabled="1" id="-10" name="Set value" sid="5953085045210627" type="pkStats">
                            <param id="0" name="Instance variable">xpRequired</param>
                            <param id="1" name="Value">10</param>
                        </action>
                        <action id="-10" name="Set value" sid="7787454307911545" type="pkStats">
                            <param id="0" name="Instance variable">xp</param>
                            <param id="1" name="Value">0</param>
                        </action>
                        <action id="-11" name="Add to" sid="955908322117129" type="pkStats">
                            <param id="0" name="Instance variable">level</param>
                            <param id="1" name="Value">1</param>
                        </action>
                        <action id="-3" name="Create object" sid="8025094611695126" type="System">
                            <param id="0" name="Object to create">verachouLevelUp</param>
                            <param id="1" name="Layer">&quot;gameplay&quot;</param>
                            <param id="2" name="X">pokemon.X</param>
                            <param id="3" name="Y">pokemon.Y</param>
                        </action>
                        <action disabled="1" id="-10" name="Set value" sid="3051405696693179" type="pkStats">
                            <param id="0" name="Instance variable">killsDone</param>
                            <param id="1" name="Value">pkStats.killsDone*0.7</param>
                        </action>
                        <action disabled="1" id="-10" name="Set value" sid="2493447668155969" type="pkStats">
                            <param id="0" name="Instance variable">killsToDo</param>
                            <param id="1" name="Value">pkStats.killsToDo*0.7</param>
                        </action>
                        <action id="0" name="Call function" sid="5774821390535725" type="Function">
                            <param id="0" name="Name">&quot;grinding. update battle text&quot;</param>
                            <param id="1" name="Parameter {n}"></param>
                        </action>
                        <action id="0" name="Call function" sid="7366721994269803" type="Function">
                            <param id="0" name="Name">&quot;notification&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Your &quot; &amp; pokemon.AnimationName &amp; &quot; has level up to &quot; &amp; pkStats.level &amp; &quot;!&quot;</param>
                        </action>
                        <action id="0" name="Call function" sid="7842176362357245" type="Function">
                            <param id="0" name="Name">&quot;text popup&quot;</param>
                            <param id="1" name="Parameter {n}">&quot;Your &quot; &amp; pokemon.AnimationName &amp; &quot; has level up to &quot; &amp; pkStats.level &amp; &quot;!&quot;{###}&quot;Yay!&quot;</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
    </events>
</c2eventsheet>
